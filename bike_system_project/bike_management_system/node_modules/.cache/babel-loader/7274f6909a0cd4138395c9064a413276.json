{"ast":null,"code":"import \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nvar _jsxFileName = \"C:\\\\Users\\\\Shuwen\\\\bike_system\\\\src\\\\pages\\\\map\\\\bikeMap.js\";\nimport React from 'react';\nimport axios from '../../axios/index';\nimport BaseForm from '../../components/BaseForm';\nexport default class Order extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      bikeInfo: {}\n    };\n    this.map = {};\n    this.formList = [{\n      type: '城市'\n    }, {\n      type: '时间查询'\n    }, {\n      type: 'SELECT',\n      label: '订单状态',\n      field: 'order_status',\n      placeholder: '全部',\n      initialValue: '0',\n      width: 150,\n      list: [{\n        id: '0',\n        name: '全部'\n      }, {\n        id: '1',\n        name: '进行中'\n      }, {\n        id: '3',\n        name: '行程结束'\n      }]\n    }];\n    this.params = {\n      page: 1\n    };\n\n    this.requestList = () => {\n      axios.ajax({\n        url: '/map/bike_list',\n        data: {\n          params: this.params\n        }\n      }).then(res => {\n        if (res) {\n          this.setState({\n            total_count: res.result.total_count\n          }, () => {});\n          this.renderMap(res.result);\n        }\n      });\n    };\n\n    this.handleFilterSubmit = filterParams => {\n      this.params = filterParams;\n      this.requestList();\n    };\n\n    this.renderMap = res => {\n      let list = res.route_list;\n      this.map = new window.BMap.Map(\"container\", {\n        enableMapClick: false\n      });\n      let gps1 = list[0].split(',');\n      let startPoint = new window.BMap.Point(gps1[0], gps1[1]);\n      let gps2 = list[list.length - 1].split(',');\n      let endPoint = new window.BMap.Point(gps2[0], gps2[1]);\n      this.map.centerAndZoom(endPoint, 11); // map.clearOverlays();\n      //添加起始图标\n\n      let startPointIcon = new window.BMap.Icon(\"/assets/start_point.png\", new window.BMap.Size(36, 42), {\n        imageSize: new window.BMap.Size(36, 42),\n        anchor: new window.BMap.Size(18, 42)\n      });\n      var bikeMarkerStart = new window.BMap.Marker(startPoint, {\n        icon: startPointIcon\n      });\n      this.map.addOverlay(bikeMarkerStart);\n      let endPointIcon = new window.BMap.Icon(\"/assets/end_point.png\", new window.BMap.Size(36, 42), {\n        imageSize: new window.BMap.Size(36, 42),\n        anchor: new window.BMap.Size(18, 42)\n      });\n      var bikeMarkerEnd = new window.BMap.Marker(endPoint, {\n        icon: endPointIcon\n      });\n      this.map.addOverlay(bikeMarkerEnd);\n      let routeList = [];\n      list.forEach(item => {\n        let p = item.split(\",\");\n        let point = new window.BMap.Point(p[0], p[1]);\n        routeList.push(point);\n      }); // 行驶路线\n\n      var polyLine = new window.BMap.Polyline(routeList, {\n        strokeColor: \"#ef4136\",\n        strokeWeight: 3,\n        strokeOpacity: 1\n      });\n      this.map.addOverlay(polyLine); // 服务区路线\n\n      let serviceList = res.service_list;\n      let servicePointist = [];\n      serviceList.forEach(item => {\n        let point = new window.BMap.Point(item.lon, item.lat);\n        servicePointist.push(point);\n      }); // 画线\n\n      var polyServiceLine = new window.BMap.Polyline(servicePointist, {\n        strokeColor: \"#ef4136\",\n        strokeWeight: 3,\n        strokeOpacity: 1\n      });\n      this.map.addOverlay(polyServiceLine); // 添加地图中的自行车\n\n      let bikeList = res.bike_list;\n      let bikeIcon = new window.BMap.Icon(\"/assets/bike.jpg\", new window.BMap.Size(36, 42), {\n        imageSize: new window.BMap.Size(36, 42),\n        anchor: new window.BMap.Size(18, 42)\n      });\n      bikeList.forEach(item => {\n        let p = item.split(\",\");\n        let point = new window.BMap.Point(p[0], p[1]);\n        var bikeMarker = new window.BMap.Marker(point, {\n          icon: bikeIcon\n        });\n        this.map.addOverlay(bikeMarker);\n      }); // 添加地图控件\n\n      this.addMapControl();\n    };\n\n    this.addMapControl = () => {\n      let map = this.map; // 左上角，添加比例尺\n\n      var top_right_control = new window.BMap.ScaleControl({\n        anchor: window.BMAP_ANCHOR_TOP_RIGHT\n      });\n      var top_right_navigation = new window.BMap.NavigationControl({\n        anchor: window.BMAP_ANCHOR_TOP_RIGHT\n      }); //添加控件和比例尺\n\n      map.addControl(top_right_control);\n      map.addControl(top_right_navigation);\n      map.enableScrollWheelZoom(true); // legend.addLegend(map);\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  } // 渲染地图\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BaseForm, {\n      formList: this.formList,\n      filterSubmit: this.handleFilterSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Card, {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, \"\\u5171\", this.state.total_count, \"\\u8F86\\u8F66\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"container\",\n      style: {\n        height: 500\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Shuwen/bike_system/src/pages/map/bikeMap.js"],"names":["React","axios","BaseForm","Order","Component","state","bikeInfo","map","formList","type","label","field","placeholder","initialValue","width","list","id","name","params","page","requestList","ajax","url","data","then","res","setState","total_count","result","renderMap","handleFilterSubmit","filterParams","route_list","window","BMap","Map","enableMapClick","gps1","split","startPoint","Point","gps2","length","endPoint","centerAndZoom","startPointIcon","Icon","Size","imageSize","anchor","bikeMarkerStart","Marker","icon","addOverlay","endPointIcon","bikeMarkerEnd","routeList","forEach","item","p","point","push","polyLine","Polyline","strokeColor","strokeWeight","strokeOpacity","serviceList","service_list","servicePointist","lon","lat","polyServiceLine","bikeList","bike_list","bikeIcon","bikeMarker","addMapControl","top_right_control","ScaleControl","BMAP_ANCHOR_TOP_RIGHT","top_right_navigation","NavigationControl","addControl","enableScrollWheelZoom","componentDidMount","render","marginTop","height"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Card, Form } from 'antd'\r\nimport axios from '../../axios/index'\r\nimport BaseForm from '../../components/BaseForm'\r\nexport default class Order extends React.Component{\r\n\r\n    state = {\r\n        bikeInfo:{}\r\n    }\r\n\r\n    map = {}\r\n\r\n    // 表单封装，通过构建表单对象，在BaseForm中进行统一渲染\r\n    formList = [\r\n        {\r\n            type: '城市'\r\n        }, {\r\n            type: '时间查询'\r\n        }, {\r\n            type: 'SELECT',\r\n            label: '订单状态',\r\n            field: 'order_status',\r\n            placeholder: '全部',\r\n            initialValue: '0',\r\n            width: 150,\r\n            list: [{id: '0', name: '全部'}, {id: '1', name: '进行中'}, {id: '3', name: '行程结束'}]\r\n        }\r\n    ]\r\n\r\n    params = {\r\n        page:1\r\n    }\r\n\r\n    // 列表请求\r\n    requestList = ()=>{\r\n        axios.ajax({\r\n            url:'/map/bike_list',\r\n            data:{\r\n                params:this.params\r\n            }\r\n        }).then((res)=>{\r\n            if(res){\r\n                this.setState({\r\n                    total_count:res.result.total_count\r\n                },()=>{\r\n                    \r\n                })\r\n                this.renderMap(res.result);\r\n            }\r\n        })\r\n    }\r\n\r\n    // 查询表单\r\n    handleFilterSubmit = (filterParams) => {\r\n        this.params = filterParams;\r\n        this.requestList();\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.requestList();\r\n    }\r\n\r\n    // 渲染地图\r\n    renderMap = (res) => {\r\n        let list = res.route_list;\r\n        this.map = new window.BMap.Map(\"container\", {enableMapClick: false});\r\n        let gps1 = list[0].split(',');\r\n        let startPoint = new window.BMap.Point(gps1[0], gps1[1]);\r\n        let gps2 = list[list.length - 1].split(',');\r\n        let endPoint = new window.BMap.Point(gps2[0], gps2[1]);\r\n\r\n        this.map.centerAndZoom(endPoint, 11);\r\n        // map.clearOverlays();\r\n\r\n        //添加起始图标\r\n        let startPointIcon = new window.BMap.Icon(\"/assets/start_point.png\", new window.BMap.Size(36, 42), {\r\n            imageSize: new window.BMap.Size(36, 42),\r\n            anchor: new window.BMap.Size(18, 42)\r\n        });\r\n        \r\n        var bikeMarkerStart = new window.BMap.Marker(startPoint, { icon: startPointIcon });\r\n        this.map.addOverlay(bikeMarkerStart);\r\n\r\n        let endPointIcon = new window.BMap.Icon(\"/assets/end_point.png\", new window.BMap.Size(36, 42), {\r\n            imageSize: new window.BMap.Size(36, 42),\r\n            anchor: new window.BMap.Size(18, 42)\r\n        });\r\n        var bikeMarkerEnd = new window.BMap.Marker(endPoint, { icon: endPointIcon });\r\n        this.map.addOverlay(bikeMarkerEnd);\r\n\r\n        let routeList = [];\r\n        list.forEach((item)=>{\r\n            let p = item.split(\",\");\r\n            let point = new window.BMap.Point(p[0], p[1]);\r\n            routeList.push(point);\r\n        })\r\n        // 行驶路线\r\n        var polyLine = new window.BMap.Polyline(routeList, {\r\n            strokeColor: \"#ef4136\",\r\n            strokeWeight: 3,\r\n            strokeOpacity: 1\r\n        });\r\n        this.map.addOverlay(polyLine);\r\n\r\n        // 服务区路线\r\n        let serviceList = res.service_list;\r\n        let servicePointist = [];\r\n        serviceList.forEach((item) => {\r\n            let point = new window.BMap.Point(item.lon, item.lat);\r\n            servicePointist.push(point);\r\n        })\r\n        // 画线\r\n        var polyServiceLine = new window.BMap.Polyline(servicePointist, {\r\n            strokeColor: \"#ef4136\",\r\n            strokeWeight: 3,\r\n            strokeOpacity: 1\r\n        });\r\n        this.map.addOverlay(polyServiceLine);\r\n\r\n        // 添加地图中的自行车\r\n        let bikeList = res.bike_list;\r\n        let bikeIcon = new window.BMap.Icon(\"/assets/bike.jpg\", new window.BMap.Size(36, 42), {\r\n            imageSize: new window.BMap.Size(36, 42),\r\n            anchor: new window.BMap.Size(18, 42)\r\n        });\r\n        bikeList.forEach((item) => {\r\n            let p = item.split(\",\");\r\n            let point = new window.BMap.Point(p[0], p[1]);\r\n            var bikeMarker = new window.BMap.Marker(point, { icon: bikeIcon });\r\n            this.map.addOverlay(bikeMarker);\r\n        })\r\n        \r\n        // 添加地图控件\r\n        this.addMapControl();\r\n    };\r\n\r\n    // 添加地图控件\r\n    addMapControl = () => {\r\n        let map = this.map;\r\n        // 左上角，添加比例尺\r\n        var top_right_control = new window.BMap.ScaleControl({anchor: window.BMAP_ANCHOR_TOP_RIGHT});\r\n        var top_right_navigation = new window.BMap.NavigationControl({anchor: window.BMAP_ANCHOR_TOP_RIGHT});\r\n        //添加控件和比例尺\r\n        map.addControl(top_right_control);\r\n        map.addControl(top_right_navigation);\r\n        map.enableScrollWheelZoom(true);\r\n        // legend.addLegend(map);\r\n    };\r\n\r\n    render(){\r\n        return (\r\n            <div style={{width:'100%'}}>\r\n                <Card>\r\n                    <BaseForm formList={this.formList} filterSubmit={this.handleFilterSubmit}/>\r\n                </Card>\r\n                <Card style={{marginTop:10}}>\r\n                    <div>共{this.state.total_count}辆车</div>\r\n                    <div id=\"container\" style={{height:500}}></div>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}