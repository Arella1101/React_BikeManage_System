{"ast":null,"code":"import \"antd/lib/date-picker/style/css\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/modal/style/css\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/radio/style/css\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/select/style/css\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\Shuwen\\\\bike_system\\\\src\\\\pages\\\\user\\\\index.js\";\nimport React from 'react';\nimport axios from '../../axios/index';\nimport Utils from '../../utils/utils';\nimport ETable from '../../components/ETable/index';\nimport Moment from 'moment';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nconst RadioGroup = _Radio.Group;\nexport default class User extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: []\n    };\n    this.params = {\n      page: 1\n    };\n\n    this.requestList = () => {\n      axios.ajax({\n        url: '/table/list1',\n        data: {\n          params: {\n            page: this.params.page\n          }\n        }\n      }).then(res => {\n        let _this = this;\n\n        this.setState({\n          list: res.result.list.map((item, index) => {\n            item.key = index;\n            return item;\n          }),\n          pagination: Utils.pagination(res, current => {\n            _this.params.page = current;\n\n            _this.requestList();\n          })\n        });\n      });\n    };\n\n    this.handleOperator = type => {\n      let item = this.state.selectedItem;\n\n      if (type == 'create') {\n        this.setState({\n          title: '创建员工',\n          isVisible: true,\n          type\n        });\n      } else if (type == \"edit\" || type == 'detail') {\n        if (!item) {\n          _Modal.info({\n            title: '信息',\n            content: '请选择一个用户'\n          });\n\n          return;\n        }\n\n        this.setState({\n          title: type == 'edit' ? '编辑用户' : '查看详情',\n          isVisible: true,\n          userInfo: item,\n          type\n        });\n      } else if (type == \"delete\") {\n        if (!item) {\n          _Modal.info({\n            title: '信息',\n            content: '请选择一个用户'\n          });\n\n          return;\n        }\n\n        Utils.ui.confirm({\n          text: '确定要删除此用户吗？',\n          onOk: () => {\n            axios.ajax({\n              url: '/user/delete',\n              data: {\n                params: {\n                  id: item.id\n                }\n              }\n            }).then(res => {\n              if (res.code == 0) {\n                this.setState({\n                  isVisible: false\n                });\n                this.requestList();\n              }\n            });\n          }\n        });\n      }\n    };\n\n    this.handleSubmit = () => {\n      let type = this.state.type;\n      let data = this.userForm.props.form.getFieldsValue();\n      axios.ajax({\n        url: type == 'create' ? '/user/add' : '/user/edit',\n        data: {\n          params: { ...data\n          }\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          this.setState({\n            isVisible: false\n          });\n          this.requestList();\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  } // 操作员工\n\n\n  render() {\n    const columns = [{\n      title: 'id',\n      dataIndex: 'id'\n    }, {\n      title: '用户名',\n      dataIndex: 'username'\n    }, {\n      title: '性别',\n      dataIndex: 'sex',\n\n      render(sex) {\n        return sex == 1 ? '男' : '女';\n      }\n\n    }, {\n      title: '状态',\n      dataIndex: 'state',\n\n      render(state) {\n        let config = {\n          '1': '咸鱼一条',\n          '2': '风华浪子',\n          '3': '北大才子一枚',\n          '4': '百度FE',\n          '5': '创业者'\n        };\n        return config[state];\n      }\n\n    }, {\n      title: '爱好',\n      dataIndex: 'interest',\n\n      render(interest) {\n        let config = {\n          '1': '游泳',\n          '2': '打篮球',\n          '3': '踢足球',\n          '4': '跑步',\n          '5': '爬山',\n          '6': '骑行',\n          '7': '桌球',\n          '8': '麦霸'\n        };\n        return config[interest];\n      }\n\n    }, {\n      title: '爱好',\n      dataIndex: 'isMarried',\n\n      render(isMarried) {\n        return isMarried ? '已婚' : '未婚';\n      }\n\n    }, {\n      title: '生日',\n      dataIndex: 'birthday'\n    }, {\n      title: '联系地址',\n      dataIndex: 'address'\n    }, {\n      title: '早起时间',\n      dataIndex: 'time'\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(FormItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Input, {\n      type: \"password\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(FormItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, \"\\u767B \\u5F55\")))), /*#__PURE__*/React.createElement(_Card, {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      icon: \"plus\",\n      onClick: () => this.handleOperator('create'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, \"\\u521B\\u5EFA\\u5458\\u5DE5\"), /*#__PURE__*/React.createElement(_Button, {\n      icon: \"edit\",\n      onClick: () => this.handleOperator('edit'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"\\u7F16\\u8F91\\u5458\\u5DE5\"), /*#__PURE__*/React.createElement(_Button, {\n      onClick: () => this.handleOperator('detail'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"\\u5458\\u5DE5\\u8BE6\\u60C5\"), /*#__PURE__*/React.createElement(_Button, {\n      type: \"danger\",\n      icon: \"delete\",\n      onClick: () => this.handleOperator('delete'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, \"\\u5220\\u9664\\u5458\\u5DE5\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ETable, {\n      columns: columns,\n      updateSelectedItem: Utils.updateSelectedItem.bind(this),\n      selectedRowKeys: this.state.selectedRowKeys,\n      dataSource: this.state.list,\n      pagination: this.state.pagination,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Modal, {\n      title: this.state.title,\n      visible: this.state.isVisible,\n      onOk: this.handleSubmit,\n      width: 800,\n      onCancel: () => {\n        this.userForm.props.form.resetFields();\n        this.setState({\n          isVisible: false,\n          userInfo: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(UserForm, {\n      userInfo: this.state.userInfo,\n      type: this.state.type,\n      wrappedComponentRef: inst => this.userForm = inst,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass UserForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getState = state => {\n      return {\n        '1': '咸鱼一条',\n        '2': '风华浪子',\n        '3': '北大才子一枚',\n        '4': '百度FE',\n        '5': '创业者'\n      }[state];\n    };\n  }\n\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 16\n      }\n    };\n    const userInfo = this.props.userInfo || {};\n    const type = this.props.type;\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u59D3\\u540D\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }\n    }), userInfo && type == 'detail' ? userInfo.username : getFieldDecorator('user_name', {\n      initialValue: userInfo.username\n    })( /*#__PURE__*/React.createElement(_Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u6027\\u522B\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    }), userInfo && type == 'detail' ? userInfo.sex == 1 ? '男' : '女' : getFieldDecorator('sex', {\n      initialValue: userInfo.sex\n    })( /*#__PURE__*/React.createElement(RadioGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Radio, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 29\n      }\n    }, \"\\u7537\"), /*#__PURE__*/React.createElement(_Radio, {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 29\n      }\n    }, \"\\u5973\")))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }\n    }), userInfo && type == 'detail' ? this.getState(userInfo.state) : getFieldDecorator('state', {\n      initialValue: userInfo.state\n    })( /*#__PURE__*/React.createElement(_Select, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 29\n      }\n    }, \"\\u54B8\\u9C7C\\u4E00\\u6761\"), /*#__PURE__*/React.createElement(Option, {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 29\n      }\n    }, \"\\u98CE\\u534E\\u6D6A\\u5B50\"), /*#__PURE__*/React.createElement(Option, {\n      value: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 29\n      }\n    }, \"\\u5317\\u5927\\u624D\\u5B50\\u4E00\\u679A\"), /*#__PURE__*/React.createElement(Option, {\n      value: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 29\n      }\n    }, \"\\u767E\\u5EA6FE\"), /*#__PURE__*/React.createElement(Option, {\n      value: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 29\n      }\n    }, \"\\u521B\\u4E1A\\u8005\")))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u751F\\u65E5\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }), userInfo && type == 'detail' ? userInfo.birthday : getFieldDecorator('birthday', {\n      initialValue: Moment(userInfo.birthday)\n    })( /*#__PURE__*/React.createElement(_DatePicker, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u8054\\u7CFB\\u5730\\u5740\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }), userInfo && type == 'detail' ? userInfo.address : getFieldDecorator('address', {\n      initialValue: userInfo.address\n    })( /*#__PURE__*/React.createElement(_Input.TextArea, {\n      rows: 3,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u5730\\u5740\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nUserForm = _Form.create({})(UserForm);","map":{"version":3,"sources":["C:/Users/Shuwen/bike_system/src/pages/user/index.js"],"names":["React","axios","Utils","ETable","Moment","FormItem","Item","Option","RadioGroup","Group","User","Component","state","list","params","page","requestList","ajax","url","data","then","res","_this","setState","result","map","item","index","key","pagination","current","handleOperator","type","selectedItem","title","isVisible","info","content","userInfo","ui","confirm","text","onOk","id","code","handleSubmit","userForm","props","form","getFieldsValue","componentDidMount","render","columns","dataIndex","sex","config","interest","isMarried","marginTop","updateSelectedItem","bind","selectedRowKeys","resetFields","inst","UserForm","getState","getFieldDecorator","formItemLayout","labelCol","span","wrapperCol","username","initialValue","birthday","address","create"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Card, Button, Table, Form, Input, Checkbox,Select,Radio, Icon, message, Modal, DatePicker } from 'antd'\r\nimport axios from '../../axios/index'\r\nimport Utils from '../../utils/utils'\r\nimport ETable from '../../components/ETable/index'\r\nimport Moment from 'moment'\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nconst RadioGroup = Radio.Group;\r\nexport default class User extends React.Component{\r\n\r\n    state = {\r\n        list:[]\r\n    }\r\n\r\n    params = {\r\n        page:1\r\n    }\r\n\r\n    requestList = ()=>{\r\n        axios.ajax({\r\n            url:'/table/list1',\r\n            data:{\r\n                params:{\r\n                    page:this.params.page\r\n                }\r\n            }\r\n        }).then((res)=>{\r\n            let _this = this;\r\n            this.setState({\r\n                list:res.result.list.map((item,index)=>{\r\n                    item.key=index\r\n                    return item;\r\n                }),\r\n                pagination:Utils.pagination(res,(current)=>{\r\n                    _this.params.page = current;\r\n                    _this.requestList();\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.requestList();\r\n    }\r\n\r\n    // 操作员工\r\n    handleOperator = (type)=>{\r\n        let item = this.state.selectedItem;\r\n        if(type =='create'){\r\n            this.setState({\r\n                title:'创建员工',\r\n                isVisible:true,\r\n                type\r\n            })\r\n        }else if(type==\"edit\" || type=='detail'){\r\n            if(!item){\r\n                Modal.info({\r\n                    title: '信息',\r\n                    content: '请选择一个用户'\r\n                })\r\n                return;\r\n            }\r\n            this.setState({\r\n                title:type=='edit'?'编辑用户':'查看详情',\r\n                isVisible:true,\r\n                userInfo:item,\r\n                type\r\n            })\r\n        }else if(type==\"delete\"){\r\n            if(!item){\r\n                Modal.info({\r\n                    title: '信息',\r\n                    content: '请选择一个用户'\r\n                })\r\n                return;\r\n            }\r\n            Utils.ui.confirm({\r\n                text:'确定要删除此用户吗？',\r\n                onOk:()=>{\r\n                    axios.ajax({\r\n                        url:'/user/delete',\r\n                        data:{\r\n                            params:{\r\n                                id:item.id\r\n                            }\r\n                        }\r\n                    }).then((res)=>{\r\n                        if(res.code ==0){\r\n                            this.setState({\r\n                                isVisible:false\r\n                            })\r\n                            this.requestList();\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSubmit = ()=>{\r\n        let type = this.state.type;\r\n        let data = this.userForm.props.form.getFieldsValue();\r\n        axios.ajax({\r\n            url:type == 'create'?'/user/add':'/user/edit',\r\n            data:{\r\n                params:{\r\n                    ...data\r\n                }\r\n            }\r\n        }).then((res)=>{\r\n            if(res.code ==0){\r\n                this.setState({\r\n                    isVisible:false\r\n                })\r\n                this.requestList();\r\n            }\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const columns = [{\r\n            title: 'id',\r\n            dataIndex: 'id'\r\n          }, {\r\n            title: '用户名',\r\n            dataIndex: 'username'\r\n          }, {\r\n            title: '性别',\r\n            dataIndex: 'sex',\r\n            render(sex){\r\n                return sex ==1 ?'男':'女'\r\n            }\r\n          }, {\r\n            title: '状态',\r\n            dataIndex: 'state',\r\n            render(state){\r\n                let config = {\r\n                    '1':'咸鱼一条',\r\n                    '2':'风华浪子',\r\n                    '3':'北大才子一枚',\r\n                    '4':'百度FE',\r\n                    '5':'创业者'\r\n                }\r\n                return config[state];\r\n            }\r\n          },{\r\n            title: '爱好',\r\n            dataIndex: 'interest',\r\n            render(interest){\r\n                let config = {\r\n                    '1':'游泳',\r\n                    '2':'打篮球',\r\n                    '3':'踢足球',\r\n                    '4':'跑步',\r\n                    '5':'爬山',\r\n                    '6':'骑行',\r\n                    '7':'桌球',\r\n                    '8':'麦霸'\r\n                }\r\n                return config[interest];\r\n            }\r\n          },{\r\n            title: '爱好',\r\n            dataIndex: 'isMarried',\r\n            render(isMarried){\r\n                return isMarried?'已婚':'未婚'\r\n            }\r\n          },{\r\n            title: '生日',\r\n            dataIndex: 'birthday'\r\n          },{\r\n            title: '联系地址',\r\n            dataIndex: 'address'\r\n          },{\r\n            title: '早起时间',\r\n            dataIndex: 'time'\r\n          }\r\n        ];\r\n        return (\r\n            <div>\r\n                <Card>\r\n                    <Form layout=\"inline\">\r\n                        <FormItem>\r\n                            <Input placeholder=\"请输入用户名\"/>\r\n                        </FormItem>\r\n                        <FormItem>\r\n                            <Input type=\"password\" placeholder=\"请输入密码\"/>\r\n                        </FormItem>\r\n                        <FormItem>\r\n                            <Button type=\"primary\">登 录</Button>\r\n                        </FormItem>\r\n                    </Form>\r\n                </Card>\r\n                <Card style={{marginTop:10}}>\r\n                    <Button type=\"primary\" icon=\"plus\" onClick={()=>this.handleOperator('create')}>创建员工</Button>\r\n                    <Button icon=\"edit\" onClick={()=>this.handleOperator('edit')}>编辑员工</Button>\r\n                    <Button onClick={()=>this.handleOperator('detail')}>员工详情</Button>\r\n                    <Button type=\"danger\" icon=\"delete\" onClick={()=>this.handleOperator('delete')}>删除员工</Button>\r\n                </Card>\r\n                <div className=\"content-wrap\">\r\n                    <ETable\r\n                        columns={columns}\r\n                        updateSelectedItem={Utils.updateSelectedItem.bind(this)}\r\n                        selectedRowKeys={this.state.selectedRowKeys}\r\n                        dataSource={this.state.list}\r\n                        pagination={this.state.pagination}\r\n                    />\r\n                </div>\r\n                <Modal\r\n                    title={this.state.title}\r\n                    visible={this.state.isVisible}\r\n                    onOk={this.handleSubmit}\r\n                    width={800}\r\n                    onCancel={()=>{\r\n                        this.userForm.props.form.resetFields();\r\n                        this.setState({\r\n                            isVisible:false,\r\n                            userInfo:''\r\n                        })\r\n                    }}\r\n                >\r\n                    <UserForm userInfo={this.state.userInfo} type={this.state.type} wrappedComponentRef={(inst) => this.userForm = inst }/>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nclass UserForm extends React.Component{\r\n\r\n    getState = (state)=>{\r\n        return {\r\n            '1':'咸鱼一条',\r\n            '2':'风华浪子',\r\n            '3':'北大才子一枚',\r\n            '4':'百度FE',\r\n            '5':'创业者'\r\n        }[state]\r\n    }\r\n\r\n    render(){\r\n        const { getFieldDecorator } = this.props.form;\r\n        const formItemLayout = {\r\n            labelCol: {span: 5},\r\n            wrapperCol: {span: 16}\r\n        };\r\n        const userInfo = this.props.userInfo || {};\r\n        const type = this.props.type;\r\n        return (\r\n            <Form layout=\"horizontal\">\r\n                <FormItem label=\"姓名\" {...formItemLayout}>\r\n                    {\r\n                        userInfo && type=='detail'?userInfo.username:\r\n                        getFieldDecorator('user_name',{\r\n                            initialValue:userInfo.username\r\n                        })(\r\n                            <Input type=\"text\" placeholder=\"请输入姓名\"/>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem label=\"性别\" {...formItemLayout}>\r\n                    {\r\n                        userInfo && type=='detail'?userInfo.sex==1?'男':'女':\r\n                        getFieldDecorator('sex',{\r\n                            initialValue:userInfo.sex\r\n                        })(\r\n                        <RadioGroup>\r\n                            <Radio value={1}>男</Radio>\r\n                            <Radio value={2}>女</Radio>\r\n                        </RadioGroup>\r\n                    )}\r\n                </FormItem>\r\n                <FormItem label=\"状态\" {...formItemLayout}>\r\n                    {\r\n                        userInfo && type=='detail'?this.getState(userInfo.state):\r\n                        getFieldDecorator('state',{\r\n                            initialValue:userInfo.state\r\n                        })(\r\n                        <Select>\r\n                            <Option value={1}>咸鱼一条</Option>\r\n                            <Option value={2}>风华浪子</Option>\r\n                            <Option value={3}>北大才子一枚</Option>\r\n                            <Option value={4}>百度FE</Option>\r\n                            <Option value={5}>创业者</Option>\r\n                        </Select>\r\n                    )}\r\n                </FormItem>\r\n                <FormItem label=\"生日\" {...formItemLayout}>\r\n                    {\r\n                        userInfo && type=='detail'?userInfo.birthday:\r\n                        getFieldDecorator('birthday',{\r\n                            initialValue:Moment(userInfo.birthday)\r\n                        })(\r\n                        <DatePicker />\r\n                    )}\r\n                </FormItem>\r\n                <FormItem label=\"联系地址\" {...formItemLayout}>\r\n                    {\r\n                        userInfo && type=='detail'?userInfo.address:\r\n                        getFieldDecorator('address',{\r\n                            initialValue:userInfo.address\r\n                        })(\r\n                        <Input.TextArea rows={3} placeholder=\"请输入联系地址\"/>\r\n                    )}\r\n                </FormItem>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\nUserForm = Form.create({})(UserForm);"]},"metadata":{},"sourceType":"module"}