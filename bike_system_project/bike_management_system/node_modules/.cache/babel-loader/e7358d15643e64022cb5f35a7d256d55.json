{"ast":null,"code":"import \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nvar _jsxFileName = \"C:\\\\Users\\\\Shuwen\\\\bike_system\\\\src\\\\pages\\\\order\\\\detail.js\";\nimport React from 'react';\nimport axios from '../../axios';\nimport './detail.less';\nexport default class Order extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.getDetailInfo = orderId => {\n      axios.ajax({\n        url: '/order/detail',\n        data: {\n          params: {\n            orderId: orderId\n          }\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          this.setState({\n            orderInfo: res.result\n          });\n          this.renderMap(res.result);\n        }\n      });\n    };\n\n    this.renderMap = result => {\n      this.map = new window.BMap.Map('orderDetailMap'); // this.map.centerAndZoom('北京',11);\n      // 添加地图控件\n\n      this.addMapControl(); // 调用路线图绘制方法\n\n      this.drawBikeRoute(result.position_list); // 调用服务区绘制方法\n\n      this.drwaServiceArea(result.area);\n    };\n\n    this.addMapControl = () => {\n      let map = this.map;\n      map.addControl(new window.BMap.ScaleControl({\n        anchor: window.BMAP_ANCHOR_TOP_RIGHT\n      }));\n      map.addControl(new window.BMap.NavigationControl({\n        anchor: window.BMAP_ANCHOR_TOP_RIGHT\n      }));\n    };\n\n    this.drawBikeRoute = positionList => {\n      let map = this.map;\n      let startPoint = '';\n      let endPoint = '';\n\n      if (positionList.length > 0) {\n        let first = positionList[0];\n        let last = positionList[positionList.length - 1];\n        startPoint = new window.BMap.Point(first.lon, first.lat);\n        let startIcon = new window.BMap.Icon('/assets/start_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(18, 42)\n        });\n        let startMarker = new window.BMap.Marker(startPoint, {\n          icon: startIcon\n        });\n        this.map.addOverlay(startMarker);\n        endPoint = new window.BMap.Point(last.lon, last.lat);\n        let endIcon = new window.BMap.Icon('/assets/end_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(18, 42)\n        });\n        let endMarker = new window.BMap.Marker(endPoint, {\n          icon: endIcon\n        });\n        this.map.addOverlay(endMarker); // 连接路线图\n\n        let trackPoint = [];\n\n        for (let i = 0; i < positionList.length; i++) {\n          let point = positionList[i];\n          trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n        }\n\n        let polyline = new window.BMap.Polyline(trackPoint, {\n          strokeColor: '#1869AD',\n          strokeWeight: 3,\n          strokeOpacity: 1\n        });\n        this.map.addOverlay(polyline);\n        this.map.centerAndZoom(endPoint, 11);\n      }\n    };\n\n    this.drwaServiceArea = positionList => {\n      // 连接路线图\n      let trackPoint = [];\n\n      for (let i = 0; i < positionList.length; i++) {\n        let point = positionList[i];\n        trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n      } // 绘制服务区\n\n\n      let polygon = new window.BMap.Polygon(trackPoint, {\n        strokeColor: '#CE0000',\n        strokeWeight: 4,\n        strokeOpacity: 1,\n        fillColor: '#ff8605',\n        fillOpacity: 0.4\n      });\n      this.map.addOverlay(polygon);\n    };\n  }\n\n  componentDidMount() {\n    let orderId = this.props.match.params.orderId;\n\n    if (orderId) {\n      this.getDetailInfo(orderId);\n    }\n  }\n\n  render() {\n    const info = this.state.orderInfo || {};\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"orderDetailMap\",\n      className: \"order-map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }, \"\\u57FA\\u7840\\u4FE1\\u606F\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 33\n      }\n    }, \"\\u7528\\u8F66\\u6A21\\u5F0F\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 33\n      }\n    }, info.mode == 1 ? '服务区' : '停车点')), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, \"\\u8BA2\\u5355\\u7F16\\u53F7\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 33\n      }\n    }, info.order_sn)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    }, \"\\u8F66\\u8F86\\u7F16\\u53F7\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, info.bike_sn)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 33\n      }\n    }, \"\\u7528\\u6237\\u59D3\\u540D\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 33\n      }\n    }, info.user_name)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 33\n      }\n    }, \"\\u624B\\u673A\\u53F7\\u7801\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, info.mobile)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 25\n      }\n    }, \"\\u884C\\u9A76\\u8F68\\u8FF9\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u7A0B\\u8D77\\u70B9\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }\n    }, info.start_location)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u7A0B\\u7EC8\\u70B9\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, info.end_location)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u9A76\\u91CC\\u7A0B\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, info.distance / 1000, \"\\u516C\\u91CC\"))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Shuwen/bike_system/src/pages/order/detail.js"],"names":["React","axios","Order","Component","state","getDetailInfo","orderId","ajax","url","data","params","then","res","code","setState","orderInfo","result","renderMap","map","window","BMap","Map","addMapControl","drawBikeRoute","position_list","drwaServiceArea","area","addControl","ScaleControl","anchor","BMAP_ANCHOR_TOP_RIGHT","NavigationControl","positionList","startPoint","endPoint","length","first","last","Point","lon","lat","startIcon","Icon","Size","imageSize","startMarker","Marker","icon","addOverlay","endIcon","endMarker","trackPoint","i","point","push","polyline","Polyline","strokeColor","strokeWeight","strokeOpacity","centerAndZoom","polygon","Polygon","fillColor","fillOpacity","componentDidMount","props","match","render","info","mode","order_sn","bike_sn","user_name","mobile","start_location","end_location","distance"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Card } from 'antd'\nimport axios from '../../axios'\nimport './detail.less'\nexport default class Order extends React.Component {\n\n    state = {}\n\n    componentDidMount(){\n        let orderId = this.props.match.params.orderId;\n        if(orderId){\n            this.getDetailInfo(orderId);\n        }\n    }\n\n    getDetailInfo = (orderId)=>{\n        axios.ajax({\n            url:'/order/detail',\n            data:{\n                params:{\n                    orderId: orderId\n                }\n            }\n        }).then((res)=>{\n            if(res.code ==0){\n                this.setState({\n                    orderInfo:res.result\n                })\n                this.renderMap(res.result);\n            }\n        })\n    }\n\n    renderMap = (result)=>{\n        this.map = new window.BMap.Map('orderDetailMap');\n        // this.map.centerAndZoom('北京',11);\n        // 添加地图控件\n        this.addMapControl();\n        // 调用路线图绘制方法\n        this.drawBikeRoute(result.position_list);\n        // 调用服务区绘制方法\n        this.drwaServiceArea(result.area);\n    }\n\n    // 添加地图控件\n    addMapControl = ()=>{\n        let map = this.map;\n        map.addControl(new window.BMap.ScaleControl({ anchor: window.BMAP_ANCHOR_TOP_RIGHT}));\n        map.addControl(new window.BMap.NavigationControl({ anchor: window.BMAP_ANCHOR_TOP_RIGHT }));\n    }\n\n    // 绘制用户的行驶路线\n    drawBikeRoute = (positionList)=>{\n        let map = this.map;\n        let startPoint = '';\n        let endPoint = '';\n        if (positionList.length>0){\n            let first = positionList[0];\n            let last = positionList[positionList.length-1];\n            startPoint = new window.BMap.Point(first.lon,first.lat);\n            let startIcon = new window.BMap.Icon('/assets/start_point.png',new window.BMap.Size(36,42),{\n                imageSize:new window.BMap.Size(36,42),\n                anchor: new window.BMap.Size(18, 42)\n            })\n\n            let startMarker = new window.BMap.Marker(startPoint, { icon: startIcon});\n            this.map.addOverlay(startMarker);\n\n            endPoint = new window.BMap.Point(last.lon, last.lat);\n            let endIcon = new window.BMap.Icon('/assets/end_point.png', new window.BMap.Size(36, 42), {\n                imageSize: new window.BMap.Size(36, 42),\n                anchor: new window.BMap.Size(18, 42)\n            })\n            let endMarker = new window.BMap.Marker(endPoint, { icon: endIcon });\n            this.map.addOverlay(endMarker);\n\n            // 连接路线图\n            let trackPoint = [];\n            for(let i=0;i<positionList.length;i++){\n                let point = positionList[i];\n                trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n            }\n\n            let polyline = new window.BMap.Polyline(trackPoint,{\n                strokeColor:'#1869AD',\n                strokeWeight:3,\n                strokeOpacity:1\n            })\n            this.map.addOverlay(polyline);\n            this.map.centerAndZoom(endPoint, 11);\n        }\n        \n    }\n\n    // 绘制服务区\n    drwaServiceArea = (positionList)=>{\n        // 连接路线图\n        let trackPoint = [];\n        for (let i = 0; i < positionList.length; i++) {\n            let point = positionList[i];\n            trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n        }\n        // 绘制服务区\n        let polygon = new window.BMap.Polygon(trackPoint, {\n            strokeColor: '#CE0000',\n            strokeWeight: 4,\n            strokeOpacity: 1,\n            fillColor: '#ff8605',\n            fillOpacity:0.4\n        })\n        this.map.addOverlay(polygon);\n    }\n\n    render(){\n        const info = this.state.orderInfo || {};\n        return (\n            <div>\n                <Card>\n                    <div id=\"orderDetailMap\" className=\"order-map\"></div>\n                    <div className=\"detail-items\">\n                        <div className=\"item-title\">基础信息</div>\n                        <ul className=\"detail-form\">\n                            <li>\n                                <div className=\"detail-form-left\">用车模式</div>\n                                <div className=\"detail-form-content\">{info.mode == 1 ?'服务区':'停车点'}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">订单编号</div>\n                                <div className=\"detail-form-content\">{info.order_sn}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">车辆编号</div>\n                                <div className=\"detail-form-content\">{info.bike_sn}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">用户姓名</div>\n                                <div className=\"detail-form-content\">{info.user_name}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">手机号码</div>\n                                <div className=\"detail-form-content\">{info.mobile}</div>\n                            </li>\n                        </ul>\n                    </div>\n                    <div className=\"detail-items\">\n                        <div className=\"item-title\">行驶轨迹</div>\n                        <ul className=\"detail-form\">\n                            <li>\n                                <div className=\"detail-form-left\">行程起点</div>\n                                <div className=\"detail-form-content\">{info.start_location}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">行程终点</div>\n                                <div className=\"detail-form-content\">{info.end_location}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">行驶里程</div>\n                                <div className=\"detail-form-content\">{info.distance/1000}公里</div>\n                            </li>\n                        </ul>\n                    </div>\n                </Card>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}