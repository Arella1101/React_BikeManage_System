{"ast":null,"code":"import \"antd/lib/modal/style/css\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/table/style/css\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/message/style/css\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/select/style/css\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\Shuwen\\\\bike_system\\\\src\\\\pages\\\\city\\\\index.js\";\nimport React from 'react';\nimport axios from './../../axios/index';\nimport Utils from './../../utils/utils';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nexport default class City extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: [],\n      isShowOpenCity: false\n    };\n    this.params = {\n      page: 1\n    };\n\n    this.requestList = () => {\n      let _this = this;\n\n      axios.ajax({\n        url: '/open_city',\n        data: {\n          params: {\n            page: this.params.page\n          }\n        }\n      }).then(res => {\n        let list = res.result.item_list.map((item, index) => {\n          item.key = index;\n          return item;\n        });\n        this.setState({\n          list: list,\n          pagination: Utils.pagination(res, current => {\n            _this.params.page = current;\n\n            _this.requestList();\n          })\n        });\n      });\n    };\n\n    this.handleOpenCity = () => {\n      this.setState({\n        isShowOpenCity: true\n      });\n    };\n\n    this.handleSubmit = () => {\n      let cityInfo = this.cityForm.props.form.getFieldsValue();\n      console.log(cityInfo);\n      axios.ajax({\n        url: '/city/open',\n        data: {\n          params: cityInfo\n        }\n      }).then(res => {\n        if (res.code == '0') {\n          _message.success('开通成功');\n\n          this.setState({\n            isShowOpenCity: false\n          });\n          this.requestList();\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  } // 默认请求我们的接口数据\n\n\n  render() {\n    const columns = [{\n      title: '城市ID',\n      dataIndex: 'id'\n    }, {\n      title: '城市名称',\n      dataIndex: 'name'\n    }, {\n      title: '用车模式',\n      dataIndex: 'mode',\n\n      render(mode) {\n        return mode == 1 ? '停车点' : '禁停区';\n      }\n\n    }, {\n      title: '营运模式',\n      dataIndex: 'op_mode',\n\n      render(op_mode) {\n        return op_mode == 1 ? '自营' : '加盟';\n      }\n\n    }, {\n      title: '授权加盟商',\n      dataIndex: 'franchisee_name'\n    }, {\n      title: '城市管理员',\n      dataIndex: 'city_admins',\n\n      render(arr) {\n        return arr.map(item => {\n          return item.user_name;\n        }).join(',');\n      }\n\n    }, {\n      title: '城市开通时间',\n      dataIndex: 'open_time'\n    }, {\n      title: '操作时间',\n      dataIndex: 'update_time',\n      render: Utils.formateDate\n    }, {\n      title: '操作人',\n      dataIndex: 'sys_user_name'\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FilterForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Card, {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleOpenCity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"\\u5F00\\u901A\\u57CE\\u5E02\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Table, {\n      bordered: true,\n      columns: columns,\n      dataSource: this.state.list,\n      pagination: this.state.pagination,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Modal, {\n      title: \"\\u5F00\\u901A\\u57CE\\u5E02\",\n      visible: this.state.isShowOpenCity,\n      onCancel: () => {\n        this.setState({\n          isShowOpenCity: false\n        });\n      },\n      onOk: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OpenCityForm, {\n      wrappedComponentRef: inst => {\n        this.cityForm = inst;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass FilterForm extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u57CE\\u5E02\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('city_id')( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      placeholder: \"\\u5168\\u90E8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, \"\\u5317\\u4EAC\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 33\n      }\n    }, \"\\u5929\\u6D25\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 33\n      }\n    }, \"\\u6DF1\\u5733\\u5E02\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u7528\\u8F66\\u6A21\\u5F0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('mode')( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 120\n      },\n      placeholder: \"\\u5168\\u90E8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }, \"\\u6307\\u5B9A\\u505C\\u8F66\\u70B9\\u6A21\\u5F0F\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 33\n      }\n    }, \"\\u7981\\u505C\\u533A\\u6A21\\u5F0F\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u8425\\u8FD0\\u6A21\\u5F0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('op_mode')( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 80\n      },\n      placeholder: \"\\u5168\\u90E8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 33\n      }\n    }, \"\\u81EA\\u8425\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }, \"\\u52A0\\u76DF\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u52A0\\u76DF\\u5546\\u6388\\u6743\\u72B6\\u6001\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('auth_status')( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      placeholder: \"\\u5168\\u90E8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 33\n      }\n    }, \"\\u5DF2\\u6388\\u6743\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 33\n      }\n    }, \"\\u672A\\u6388\\u6743\")))), /*#__PURE__*/React.createElement(FormItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      style: {\n        margin: '0 20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, \"\\u67E5\\u8BE2\"), /*#__PURE__*/React.createElement(_Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, \"\\u91CD\\u7F6E\")));\n  }\n\n}\n\nclass OpenCityForm extends React.Component {\n  render() {\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      initialValue: \"1\",\n      label: \"\\u9009\\u62E9\\u57CE\\u5E02\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }, \"\\u5317\\u4EAC\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, \"\\u5929\\u6D25\\u5E02\"))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u8425\\u8FD0\\u6A21\\u5F0F\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('op_mode', {\n      initialValue: '1'\n    })( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 33\n      }\n    }, \"\\u81EA\\u8425\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 33\n      }\n    }, \"\\u52A0\\u76DF\")))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u7528\\u8F66\\u6A21\\u5F0F\"\n    }, formItemLayout, {\n      initialValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 25\n      }\n    }, \"\\u6307\\u5B9A\\u505C\\u8F66\\u70B9\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 25\n      }\n    }, \"\\u7981\\u505C\\u533A\"))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Shuwen/bike_system/src/pages/city/index.js"],"names":["React","axios","Utils","FormItem","Item","Option","City","Component","state","list","isShowOpenCity","params","page","requestList","_this","ajax","url","data","then","res","result","item_list","map","item","index","key","setState","pagination","current","handleOpenCity","handleSubmit","cityInfo","cityForm","props","form","getFieldsValue","console","log","code","success","componentDidMount","render","columns","title","dataIndex","mode","op_mode","arr","user_name","join","formateDate","marginTop","inst","FilterForm","getFieldDecorator","width","margin","OpenCityForm","formItemLayout","labelCol","span","wrapperCol","initialValue"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Card, Button, Table, Form, Select, Modal, message } from 'antd';\r\nimport axios from './../../axios/index';\r\nimport Utils from './../../utils/utils';\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nexport default class City extends React.Component{\r\n\r\n    state = {\r\n        list:[],\r\n        isShowOpenCity:false\r\n    }\r\n    params = {\r\n        page:1\r\n    }\r\n    componentDidMount(){\r\n        this.requestList();\r\n    }\r\n\r\n    // 默认请求我们的接口数据\r\n    requestList = ()=>{\r\n        let _this = this;\r\n        axios.ajax({\r\n            url: '/open_city',\r\n            data:{\r\n                params:{\r\n                    page:this.params.page\r\n                }\r\n            }\r\n        }).then((res)=>{\r\n            let list = res.result.item_list.map((item, index) => {\r\n                item.key = index;\r\n                return item;\r\n            });\r\n            this.setState({\r\n                list:list,\r\n                pagination:Utils.pagination(res,(current)=>{\r\n                    _this.params.page = current;\r\n                    _this.requestList();\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    // 开通城市\r\n    handleOpenCity = ()=>{\r\n        this.setState({\r\n            isShowOpenCity:true\r\n        })\r\n    }\r\n    // 城市开通提交\r\n    handleSubmit = ()=>{\r\n        let cityInfo = this.cityForm.props.form.getFieldsValue();\r\n        console.log(cityInfo);\r\n        axios.ajax({\r\n            url:'/city/open',\r\n            data:{\r\n                params:cityInfo\r\n            }\r\n        }).then((res)=>{\r\n            if(res.code == '0'){\r\n                message.success('开通成功');\r\n                this.setState({\r\n                    isShowOpenCity:false\r\n                })\r\n                this.requestList();\r\n            }\r\n        })\r\n    }\r\n    render(){\r\n        const columns = [\r\n            {\r\n                title:'城市ID',\r\n                dataIndex:'id'\r\n            }, {\r\n                title: '城市名称',\r\n                dataIndex: 'name'\r\n            }, {\r\n                title: '用车模式',\r\n                dataIndex: 'mode',\r\n                render(mode){\r\n                    return mode ==1 ?'停车点':'禁停区';\r\n                }\r\n            }, {\r\n                title: '营运模式',\r\n                dataIndex: 'op_mode',\r\n                render(op_mode) {\r\n                    return op_mode == 1 ? '自营' : '加盟';\r\n                }\r\n            }, {\r\n                title: '授权加盟商',\r\n                dataIndex: 'franchisee_name'\r\n            }, {\r\n                title: '城市管理员',\r\n                dataIndex: 'city_admins',\r\n                render(arr){\r\n                    return arr.map((item)=>{\r\n                        return item.user_name;\r\n                    }).join(',');\r\n                }\r\n            }, {\r\n                title: '城市开通时间',\r\n                dataIndex: 'open_time'\r\n            }, {\r\n                title: '操作时间',\r\n                dataIndex: 'update_time',\r\n                render: Utils.formateDate\r\n            }, {\r\n                title: '操作人',\r\n                dataIndex: 'sys_user_name'\r\n            }\r\n        ]\r\n        return (\r\n            <div>\r\n                <Card>\r\n                    <FilterForm />\r\n                </Card>\r\n                <Card style={{marginTop:10}}>\r\n                    <Button type=\"primary\" onClick={this.handleOpenCity}>开通城市</Button>\r\n                </Card>\r\n                <div className=\"content-wrap\">\r\n                    <Table\r\n                        bordered\r\n                        columns={columns}\r\n                        dataSource={this.state.list}\r\n                        pagination={this.state.pagination}\r\n                    />\r\n                </div>\r\n                <Modal \r\n                    title=\"开通城市\"\r\n                    visible={this.state.isShowOpenCity}\r\n                    onCancel={()=>{\r\n                        this.setState({\r\n                            isShowOpenCity:false\r\n                        })\r\n                    }}\r\n                    onOk={this.handleSubmit}\r\n                >\r\n                    <OpenCityForm wrappedComponentRef={(inst)=>{this.cityForm = inst;}}/>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass FilterForm extends React.Component{\r\n\r\n    render(){\r\n        return (\r\n            <Form layout=\"inline\">\r\n                <FormItem label=\"城市\">\r\n                    {\r\n                        getFieldDecorator('city_id')(\r\n                            <Select\r\n                                style={{width:100}}\r\n                                placeholder=\"全部\"\r\n                            >\r\n                                <Option value=\"\">全部</Option>\r\n                                <Option value=\"1\">北京市</Option>\r\n                                <Option value=\"2\">天津市</Option>\r\n                                <Option value=\"3\">深圳市</Option>\r\n                            </Select>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem label=\"用车模式\">\r\n                    {\r\n                        getFieldDecorator('mode')(\r\n                            <Select\r\n                                style={{ width: 120 }}\r\n                                placeholder=\"全部\"\r\n                            >\r\n                                <Option value=\"\">全部</Option>\r\n                                <Option value=\"1\">指定停车点模式</Option>\r\n                                <Option value=\"2\">禁停区模式</Option>\r\n                            </Select>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem label=\"营运模式\">\r\n                    {\r\n                        getFieldDecorator('op_mode')(\r\n                            <Select\r\n                                style={{ width: 80 }}\r\n                                placeholder=\"全部\"\r\n                            >\r\n                                <Option value=\"\">全部</Option>\r\n                                <Option value=\"1\">自营</Option>\r\n                                <Option value=\"2\">加盟</Option>\r\n                            </Select>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem label=\"加盟商授权状态\">\r\n                    {\r\n                        getFieldDecorator('auth_status')(\r\n                            <Select\r\n                                style={{ width: 100 }}\r\n                                placeholder=\"全部\"\r\n                            >\r\n                                <Option value=\"\">全部</Option>\r\n                                <Option value=\"1\">已授权</Option>\r\n                                <Option value=\"2\">未授权</Option>\r\n                            </Select>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem>\r\n                    <Button type=\"primary\" style={{margin:'0 20px'}}>查询</Button>\r\n                    <Button>重置</Button>\r\n                </FormItem>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nclass OpenCityForm extends React.Component{\r\n    render(){\r\n        const formItemLayout = {\r\n            labelCol:{\r\n                span:5\r\n            },\r\n            wrapperCol:{\r\n                span:19\r\n            }\r\n        }\r\n        \r\n        return (\r\n            <Form layout=\"horizontal\">\r\n                <FormItem \r\n                initialValue='1'\r\n                label=\"选择城市\" {...formItemLayout}\r\n                \r\n                >\r\n                <Select style={{ width: 100 }}>\r\n                    <Option value=\"\">全部</Option>\r\n                    <Option value=\"1\">北京市</Option>\r\n                    <Option value=\"2\">天津市</Option>\r\n                </Select>\r\n                </FormItem>\r\n                <FormItem label=\"营运模式\" {...formItemLayout}>\r\n                    {\r\n                        getFieldDecorator('op_mode', {\r\n                            initialValue: '1'\r\n                        })(\r\n                            <Select style={{ width: 100 }}>\r\n                                <Option value=\"1\">自营</Option>\r\n                                <Option value=\"2\">加盟</Option>\r\n                            </Select>\r\n                        )\r\n                    }\r\n                </FormItem>\r\n                <FormItem label=\"用车模式\" {...formItemLayout}\r\n                initialValue= '1'\r\n                \r\n                >\r\n                    {\r\n                    <Select style={{ width: 100 }}>\r\n                        <Option value=\"1\">指定停车点</Option>\r\n                        <Option value=\"2\">禁停区</Option>\r\n                    </Select>\r\n                \r\n                    }\r\n                </FormItem>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}